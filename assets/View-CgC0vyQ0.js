import{c as $,t as i,A as P,r as l,g as w,j as e,H as E,b as k,E as A,h as O}from"./index-BV6FT8Uv.js";import{h as R,u as M,r as H,a as U}from"./Carts-0ogl0RAy.js";import{H as q}from"./heart-CLJtUlTb.js";import{M as J}from"./minus-U8Hx-iro.js";import{P as T}from"./plus-0Cvm1htv.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],D=$("star",B),Q="http://localhost:5000/api";async function V(o){try{i.loading("Fetching product...");const s=await fetch(`${Q}/product/${o}`);if(!s.ok)throw new Error(`Failed to fetch: ${s.statusText}`);return await s.json()}catch(s){return i.error(`Error fetching product: ${s.message}`),null}finally{i.dismiss()}}const C="http://localhost:5000/api";function Z(){const{product_id:o}=P(),[s,n]=l.useState(null),[m,x]=l.useState(null),[g,u]=l.useState(!1),[c,f]=l.useState(!1),[d,h]=l.useState(!1),[p,y]=l.useState(!1);l.useEffect(()=>{(async()=>{if(o)try{const a=await V(o),t=a.product||a,{isInCart:r,quantity:I}=await R(t.id);n({...t,order:I||1,is_cart:r}),x(C+t.img1)}catch(a){i.error(a.message||"Failed to load product")}})()},[o]),l.useEffect(()=>{const a=w("wishlist");if(!(!a||!s?.id))try{const t=JSON.parse(a);Array.isArray(t)&&t.includes(s?.id)&&h(!0)}catch(t){console.error("Failed to parse wishlist:",t)}},[s?.id]);const b=async a=>{if(!s)return;f(!0),await M(s?.id,a)?n(r=>r&&{...r,order:a}):i.error("Failed to update quantity"),f(!1)},L=()=>b(Math.min(s?.order+1,s?.stock)),S=()=>b(Math.max(s?.order-1,1)),z=async()=>{if(!s)return;u(!0);const a=s?.is_cart?H:U;(s?.is_cart?await a(s?.id):await a(s?.id,s?.order))?(n(r=>({...r,is_cart:!r.is_cart})),i.success(s?.is_cart?"Removed from cart":"Added to cart")):i.error("Failed to update cart"),u(!1)},_=a=>{if(a.stopPropagation(),!(p||!s)){y(!0);try{let t=w("wishlist");t=t?JSON.parse(t):[],d?t=t.filter(r=>r!==s?.id):t.push(s?.id),O("wishlist",JSON.stringify(t)),h(!d)}finally{y(!1)}}};if(!s)return e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 text-gray-500",children:[e.jsx("span",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500 mr-3",children:" "})," ",e.jsx("div",{className:"font-semibold text-lg",children:" Loading product... "})," "]});const F=[s?.img1,s?.img2,s?.img3].filter(Boolean).map(a=>C+a),j=parseFloat(s?.discount_percentage),N=parseFloat(s?.discount_price),v=j>0&&N>0;return e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsxs("title",{children:[" Fenzo | ",s?.title," "]})," "]})," ",e.jsxs("div",{className:"min-h-screen bg-gray-50 p-2 md:p-8",children:[e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10 bg-white shadow-xl rounded-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-2",children:[" ",e.jsxs("div",{className:"relative bg-gray-100 rounded-xl w-full",children:[e.jsx(k.LazyLoadImage,{src:m,fetchpriority:"high",loading:"lazy",alt:s?.title,effect:"opacity",className:"w-full object-cover rounded-xl"}),e.jsxs("span",{className:"absolute top-4 right-4 p-3 bg-white/70 backdrop-blur-sm rounded-full cursor-pointer",onClick:_,children:[e.jsx(q,{size:22,fill:d?"#f97316":"none",stroke:d?"#f97316":"#4b5563",className:`transition-transform duration-200 ${p?"animate-pulse":"hover:scale-110"}`})," "]})," ",!v&&e.jsxs("span",{className:"absolute bottom-4 left-4 bg-orange-500 text-white text-sm font-semibold px-3 py-1 rounded-full",children:["-",j.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex gap-4 overflow-x-auto justify-center",children:[" ",F.map((a,t)=>e.jsx("div",{onClick:()=>x(a),className:`cursor-pointer border-2 rounded-lg ${m===a?"border-orange-500":"border-gray-200"}`,children:e.jsx(k.LazyLoadImage,{src:a,fetchpriority:"high",loading:"lazy",alt:`Thumbnail ${t+1}`,effect:"opacity",className:"object-cover h-full w-full rounded-md"})},t))," "]})," "]}),e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-3",children:[" ",e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mb-2 leading-tight",children:[" ",s?.title," "]})," ",v?e.jsxs("p",{className:"text-2xl font-bold text-orange-500",children:["₦ ",s?.price.toLocaleString()]}):e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-3xl font-bold text-orange-500",children:["₦ ",N.toLocaleString()]}),e.jsxs("p",{className:"text-xl font-medium text-gray-400 line-through",children:["₦ ",s?.price.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[" ",Array.from({length:5}).map((a,t)=>e.jsx(D,{size:20,fill:t<s?.rank?"orange":"gray",stroke:t<s?.rank?"orange":"gray",className:"mr-1"},t))," ",e.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:[" ","(",s?.rank," / 5 Rank)"," "]})," "]})," "]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:[" ","Description"," "]})," ",e.jsxs("p",{className:"text-gray-600 leading-relaxed",children:[" ",s?.description," "]})," "]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[" ",e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg flex flex-col items-start",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[" ","Category"," "]})," ",e.jsxs("span",{className:"text-lg font-semibold text-gray-800 capitalize",children:[" ",s?.category," "]})," "]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg flex flex-col items-start",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[" ","Brand"," "]})," ",e.jsxs("span",{className:"text-lg font-semibold text-gray-800 capitalize",children:[" ",s?.brand," "]})," "]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg flex flex-col items-start",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[" ","Size"," "]})," ",e.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:[" ",s?.size," "]})," "]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg flex flex-col items-start",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[" ","Color"," "]})," ",e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-lg font-semibold text-gray-800 capitalize",children:[" ",s?.color," "]})," ",e.jsx("span",{className:"w-5 h-5 rounded-full border border-gray-300",style:{backgroundColor:s?.color.toLowerCase()},children:" "})," "]})," "]})," "]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[e.jsxs("p",{className:`font-semibold text-sm ${s?.stock===0?"text-red-500":"text-gray-600"}`,children:[e.jsx("span",{className:"text-gray-900",children:" Availability: "})," ",s?.stock===0?"Out of Stock":`${s?.stock} items left`," "]})," ",s?.is_cart&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-gray-700 font-medium",children:[" ","Quantity:"," "]})," ",e.jsxs("button",{disabled:c||s?.order<=1,onClick:S,className:"p-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(J,{size:16})," "]})," ",e.jsxs("span",{className:"font-bold text-lg w-10 text-center",children:[" ",s?.order," "]})," ",e.jsxs("button",{disabled:c||s?.order>=s?.stock,onClick:L,className:"p-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(T,{size:16})," "]})," "]})," "]}),e.jsxs("button",{disabled:g||c||s?.stock===0,onClick:z,className:`w-full py-4 mt-4 rounded-xl font-bold text-white flex justify-center items-center gap-2 transition-transform duration-200 hover:scale-[1.01] ${s?.is_cart?"bg-green-600 hover:bg-green-700":"bg-orange-500 hover:bg-orange-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(A,{size:22})," ",g||c?"Please wait...":s?.is_cart?"Remove from Cart":"Add to Cart"," "]})," "]})," "]})," "]})," "]})," "]})}export{Z as default};

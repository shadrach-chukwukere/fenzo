import{g as i,I as u,J as d,t as o,K as h,N as m,O as f}from"./index-Dt3GVyhz.js";const c="http://localhost:5000/api",n=()=>i("token"),w=async()=>{const a=n();if(!a)return m();try{const t=await(await fetch(`${c}/cart`,{headers:{Authorization:`Bearer ${a}`}})).json();return t.success?t.cart:[]}catch{return o.error("Failed to fetch cart items."),[]}},l=async(a,r=1)=>{const t=n();if(!t)return h(a,r);try{const e=await fetch(`${c}/cart/add`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({productId:a,quantity:r})}),s=await e.json();if(!e.ok||!s.success)throw new Error(s.message||"Failed to add to cart.");return o.success("Added to cart!"),!0}catch(e){return o.error(e.message||"Failed to add to cart."),!1}},C=async a=>{const r=n();if(!r)return d(a);try{const t=await fetch(`${c}/cart/remove`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({productId:a})}),e=await t.json();if(!t.ok||!e.success)throw new Error(e.message||"Failed to remove item.");return o.success("Item removed from cart."),{success:!0,cart:e.cart}}catch(t){return o.error(t.message||"Failed to remove item."),{success:!1,cart:[]}}},p=async(a,r)=>{const t=n();if(!t)return f(a,r);try{const e=await fetch(`${c}/cart/update`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({productId:a,quantity:r})}),s=await e.json();if(!e.ok||!s.success)throw new Error(s.message||"Failed to update item.");return o.success(s.message),{success:!0,cart:s.cart}}catch(e){return o.error(e.message||"Failed to update item."),{success:!1,cart:[]}}},g=async a=>{const r=n();if(!r)return u(a);try{const t=await fetch(`${c}/cart/has?product_id=${a}`,{headers:{Authorization:`Bearer ${r}`}});if(!t.ok)throw new Error("Failed to check cart.");const e=await t.json();return{isInCart:e.is_cart==="yes",quantity:e.quantity||0}}catch{return{isInCart:!1,quantity:0}}};export{l as a,w as f,g as h,C as r,p as u};

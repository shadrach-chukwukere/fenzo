import{g as v,t as i,h as p,k as L,r as d,j as e,B as S,l as C,L as f}from"./index-Dt3GVyhz.js";import{I as b}from"./input-YDMnxOjl.js";import{S as y,E,a as z}from"./settings-DDmlvVOL.js";import{L as P}from"./lock-RnG29LOR.js";import{A as $}from"./arrow-right-D4g8GAGt.js";const F="http://localhost:5000/api",I=async r=>{const c=v("guest_id");r.guest_id=c;try{const a=await fetch(`${F}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await a.json();return a.status===401?(i.warning(s?.message||"Unauthorized"),{message:s?.message,key:"password"}):a.status===404?(i.error(s?.message||"User not found"),{message:s?.message,key:"email"}):a.ok&&s?.success?(p("token",s.token),p("user",JSON.stringify(s.user)),L("guest_id"),i.success(s?.message||"Login successful!"),window.location.href="/",{message:"Login successful",key:null}):(i.error(s?.message||"Login failed"),{message:s?.message||"Login failed",key:null})}catch{return i.error("Login failed. Please try again."),{message:"Login failed",key:null}}},D=()=>{const[r,c]=d.useState({email:"",password:""}),[a,s]=d.useState({}),[l,x]=d.useState(!1),[m,w]=d.useState(!1),j=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),N=o=>/^\d{7,15}$/.test(o),h=o=>{const{name:n,value:g}=o.target;c(t=>({...t,[n]:g})),s(t=>({...t,[n]:""}))},k=async o=>{o.preventDefault();const{email:n,password:g}=r,t={};if(n.trim()?!j(n.trim())&&!N(n.trim())&&(t.email="Invalid email or phone number format"):t.email="Email is required",g||(t.password="Password is required"),Object.keys(t).length){s(t);return}s({}),x(!0);const u=await I(r);x(!1),u?.key&&s({[u.key]:u.message})};return e.jsxs("div",{className:"min-h-screen relative flex flex-col lg:flex-row items-center justify-center bg-gray-50 overflow-hidden",children:[e.jsxs("div",{className:"absolute lg:relative w-full h-full lg:w-1/2 lg:h-screen flex flex-col items-center justify-center z-0",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-orange-300 rounded-full mix-blend-lighten blur-3xl opacity-50 animate-pulse-slow"}),e.jsx(y,{className:"absolute top-20 right-20 text-orange-400 opacity-20 animate-spin-slow",size:100}),e.jsx(y,{className:"absolute bottom-20 left-20 text-amber-500 opacity-20 animate-spin-reverse-slow",size:100}),e.jsxs("div",{className:"hidden lg:block z-10 px-10 max-w-lg text-gray-800 text-center",children:[e.jsx(P,{size:60,className:"mx-auto mb-4 text-orange-600"}),e.jsx("h1",{className:"text-4xl font-extrabold leading-tight tracking-wide mb-4",children:"Welcome Back"}),e.jsx("p",{className:"text-lg font-light leading-relaxed opacity-90",children:"Sign in to continue to your personalized dashboard and manage your account."})]})]}),e.jsxs("div",{className:`relative w-full max-w-sm md:max-w-md bg-white rounded-2xl shadow-xl p-8 z-10 mx-4\r
        md:bg-opacity-95 md:shadow-none md:backdrop-filter md:backdrop-blur-sm\r
        lg:bg-white lg:bg-opacity-100 lg:shadow-xl lg:backdrop-filter-none`,children:[e.jsxs("div",{className:"block lg:hidden text-center text-gray-800 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-sm",children:"Please login to your account."})]}),e.jsx("h2",{className:"hidden lg:block text-2xl font-bold text-gray-800 text-center mb-6",children:"Login to Your Account"}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email / Phone"}),e.jsx(b,{id:"email",name:"email",placeholder:"Enter your email or phone",value:r.email,onChange:h,className:`w-full px-4 py-3 rounded-lg border ${a.email?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 transition duration-200`,disabled:l,"aria-describedby":"email-error",autoComplete:"username",error:a.email})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx(b,{id:"password",name:"password",type:m?"text":"password",placeholder:"Enter your password",value:r.password,onChange:h,className:`w-full px-4 py-3 rounded-lg border ${a.password?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 transition duration-200`,disabled:l,"aria-describedby":"password-error",autoComplete:"current-password",error:a.password}),e.jsx("button",{type:"button",onClick:()=>w(!m),tabIndex:-1,className:"absolute top-9 right-3 text-gray-500 hover:text-gray-700",disabled:l,children:m?e.jsx(E,{size:20}):e.jsx(z,{size:20})})]}),e.jsx(S,{type:"submit",disabled:l,className:`w-full py-3 px-4 rounded-lg bg-orange-600 hover:bg-orange-700 text-white font-medium transition duration-200 flex items-center justify-center ${l?"opacity-70 cursor-not-allowed":""}`,children:l?e.jsx(C,{className:"animate-spin h-5 w-5 mr-2"}):e.jsxs(e.Fragment,{children:["Login ",e.jsx($,{size:18,className:"ml-2"})]})})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Forgot password?"," ",e.jsx(f,{to:"/forgot-password",className:"text-orange-600 hover:underline font-medium",children:"Reset it"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Don't have an account?"," ",e.jsx(f,{to:"/signup",className:"text-orange-600 hover:underline font-medium",children:"Create Account"})]})]})]})]})};export{D as default};

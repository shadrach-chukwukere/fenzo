import{t as d,r as i,j as e,H as b,l as v,L as N}from"./index-BV6FT8Uv.js";import{A as m}from"./arrow-right-HM2RhpXs.js";const S="http://localhost:5000/api",E=async(a,l,n,o)=>{l(!0),o("");try{const t=await fetch(`${S}/reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),s=await t.json();if(s?.status&&s?.message&&(d.success(s?.message+" you have been sent a mail"||"Reset link sent!"),n(!0)),!t.ok||!s)throw n(!1),new Error(s.message||"Something went wrong");return s}catch(t){d.error(t.message||"Error sending reset email"),o(t.message||"Something went wrong")}finally{l(!1)}},F=()=>{const[a,l]=i.useState(""),[n,o]=i.useState(""),[t,s]=i.useState(!1),[u,x]=i.useState(!1),[h,c]=i.useState(!1),[g,f]=i.useState({}),p=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),j=r=>/^\d{7,15}$/.test(r),y=async r=>{if(r.preventDefault(),!a.trim()){o("Email / Phone is required");return}if(!p(a.trim())&&!j(a.trim())){o("Invalid email format");return}const w=await E(a,s,x,o);f(w)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("title",{children:"Fenzo | Forgot Password"})}),e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-6",children:"Forgot Password"}),u?e.jsxs("div",{className:"text-center text-gray-700 space-y-4",children:[e.jsxs("p",{children:["We've sent a password reset link to ",g?.data,"."]}),e.jsx("p",{children:"Please check your inbox and follow the instructions."}),e.jsx("div",{children:e.jsxs(N,{to:"/login",className:"text-orange-500 flex justify-center",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onMouseOver:()=>c(!0),children:["Proceed to login"," ",e.jsx(m,{className:`${h&&"translate-x-2"} transition duration-400`})," "]})})]}):e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address / Phone Number"}),e.jsx("input",{id:"email",type:"text",name:"email",placeholder:"Enter your email or phone",value:a,onChange:r=>l(r.target.value),className:`w-full px-4 py-3 rounded-lg border ${n?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 transition`,disabled:t,autoComplete:"email,phone"}),n&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]}),e.jsx("button",{type:"submit",disabled:t,className:`w-full py-3 px-4 rounded-lg bg-orange-600 hover:bg-orange-700 text-white font-medium flex items-center justify-center transition ${t?"opacity-70 cursor-not-allowed":""}`,children:t?e.jsx(v,{className:"animate-spin h-5 w-5 mr-2"}):e.jsxs(e.Fragment,{children:["Send Reset Link ",e.jsx(m,{size:18,className:"ml-2"})]})})]})]})})]})};export{F as default};

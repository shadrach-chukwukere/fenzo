import{c as L,r as o,p as S,j as e,H as k,B as P,L as b,b as R}from"./index-BV6FT8Uv.js";import{f as _,r as q,u as z}from"./Carts-0ogl0RAy.js";import{C as M}from"./Confirm-DnFIMAed.js";import{M as T}from"./minus-U8Hx-iro.js";import{P as E}from"./plus-0Cvm1htv.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],O=L("trash",H),B="http://localhost:5000/api",D=s=>{const c=s.length,d=s.reduce((l,n)=>l+n?.quantity,0),i=s.reduce((l,n)=>l+n?.quantity*n?.price,0);return{totalProducts:c,totalItems:d,totalPrice:i}};function U(){const[s,c]=o.useState([]),[d,i]=o.useState(!0),[l,n]=o.useState({}),[y,x]=o.useState(!1),[u,h]=o.useState(null),N=S();o.useEffect(()=>{(async()=>{i(!0);const a=await _();c(a),i(!1)})()},[]);const p=t=>{h(t),x(!0)},v=async t=>{if(t&&u){const a=await q(u);a?.success&&c(a.cart)}x(!1),h(null)},g=async(t,a,r)=>{const f=a+r;if(f<1){p(t);return}n(m=>({...m,[t]:!0}));const j=await z(t,f);j?.success&&c(j.cart),n(m=>({...m,[t]:!1}))},{totalProducts:w,totalItems:C,totalPrice:I}=D(s);return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:"Fenzo | Cart"})}),e.jsxs("div",{className:"min-h-screen text-white p-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-orange-500 mb-2",children:"Cart Summary"}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl flex items-center flex-wrap gap-3 justify-around mb-6",children:[e.jsxs("p",{className:"text-sm md:text-base",children:[e.jsx("span",{className:"text-orange-400 font-semibold",children:"Total Products:"})," ",w]}),e.jsxs("p",{className:"text-sm md:text-base",children:[e.jsx("span",{className:"text-orange-400 font-semibold",children:"Total Items:"})," ",C]}),e.jsxs("p",{className:"text-sm md:text-base",children:[e.jsx("span",{className:"text-orange-400 font-semibold",children:"Total Price:"})," ","₦",I.toLocaleString()]}),e.jsx("div",{className:"text-sm md:text-base",children:e.jsx("div",{onClick:()=>s.length>0&&N("/checkOut",{state:{cartItems:s}}),children:e.jsx(P,{className:"cursor-pointer",children:"CheckOut"})})})]}),e.jsx("h2",{className:"text-2xl font-bold text-orange-500 mb-4",children:"Cart Items"}),d?e.jsx("div",{className:"text-center py-10 font-semibold text-lg",children:"Loading..."}):s.length===0?e.jsx("div",{className:"text-center py-10 text-orange-300",children:"No items in cart."}):s.map((t,a)=>{const r=l[t?.product_id]||!1;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center bg-gray-700 p-4 rounded-xl mb-4",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex justify-start",children:e.jsx(b,{to:`../product/${t?.product_id}`,className:"bg-orange-500 max-w-[200px] min-h-[200px] min-w-[200px] rounded-xl",children:e.jsx(R.LazyLoadImage,{src:B+t?.img1,fetchpriority:"high",loading:"lazy",alt:t?.title,className:"w-full max-w-[200px] min-w-[200px]  rounded-xl object-contain cursor-pointer"})})}),e.jsxs("div",{className:"w-full lg:w-1/2 text-right space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{to:`../product/${t?.product_id}`,children:e.jsx("h3",{className:"lg:text-lg text-md font-semibold truncate cursor-pointer text-orange-300",children:t?.title})}),e.jsxs("p",{className:"text-[orange] text-sm font-bold",children:["₦",(t?.price*t?.quantity).toLocaleString(),e.jsxs("span",{className:"text-white ms-2 text-xs",children:["(",t?.quantity," × ₦",t?.price.toLocaleString(),")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("button",{onClick:()=>g(t?.product_id,t?.quantity,-1),className:"bg-orange-500 text-white p-2 rounded hover:bg-orange-600",disabled:r,children:e.jsx(T,{size:18})}),e.jsx("div",{className:"px-4 py-2 border border-white rounded text-center min-w-[40px]",children:t?.quantity}),e.jsx("button",{onClick:()=>g(t?.product_id,t?.quantity,1),className:"bg-orange-500 text-white p-2 rounded hover:bg-orange-600",disabled:r,children:r?e.jsx("div",{className:"w-5 h-5 border-4 border-t-transparent border-white rounded-full animate-spin"}):e.jsx(E,{size:18})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"mt-2 px-4 py-2 flex gap-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:()=>p(t?.product_id),disabled:r,children:[e.jsx(O,{}),"Remove from Cart"]})})]})]},a)}),e.jsx(M,{open:y,setOpen:x,title:"Remove item from cart?",description:"Are you sure you want to delete this item? This action cannot be undone.",onConfirm:v})]})]})}export{U as default};

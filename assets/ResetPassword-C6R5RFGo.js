import{t as p,n as h,u as g,r as d,j as e,H as w,B as b,h as j}from"./index-DFjaJnkr.js";import{L as y}from"./lock-CkCqb-hn.js";const N="http://localhost:5000/api",v=async(c,m,n,s,u)=>{n(!0),s("");try{const t={password:c,token:m},l=await fetch(`${N}/resetPassword`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log(t);const r=await l.json();if(!l.ok){p.error(r?.message),s(r.message||"Failed to reset password");return}p.success(r?.message),u()}catch(t){s(t.message||"Server error")}finally{n(!1)}},S=()=>{const c=h(),[m]=g(),n=m.get("token"),[s,u]=d.useState(""),[t,l]=d.useState(""),[r,i]=d.useState(""),[a,x]=d.useState(!1),f=async o=>{if(o.preventDefault(),!s||!t){i("Both fields are required.");return}if(s.length<6){i("Password must be at least 6 characters.");return}if(s!==t){i("Passwords do not match.");return}await v(s,n,x,i,()=>{setTimeout(()=>{c("/login")},1e4)})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("title",{children:"Fenzo | Reset"})}),e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(y,{className:"w-6 h-6 text-orange-600 mr-2"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center",children:"Create New Password"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{id:"password",type:"password",value:s,onChange:o=>u(o.target.value),placeholder:"Enter new password",className:`w-full px-4 py-3 rounded-lg border ${r?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 transition`,disabled:a,autoComplete:"new-password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{id:"confirm",type:"password",value:t,onChange:o=>l(o.target.value),placeholder:"Confirm password",className:`w-full px-4 py-3 rounded-lg border ${r?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 transition`,disabled:a,autoComplete:"password"}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}),e.jsx(b,{type:"submit",disabled:a,className:`w-full py-3 px-4 rounded-lg bg-orange-600 hover:bg-orange-700 text-white font-medium flex items-center justify-center transition ${a?"opacity-70 cursor-not-allowed":""}`,children:a?e.jsx(j,{className:"animate-spin h-5 w-5"}):"Reset Password"})]})]})})]})};export{S as default};
